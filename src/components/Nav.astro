---
/**
 * Main navigation component for the site.
 * Provides accessible navigation links with current page indication.
 *
 * @remarks
 * - Uses semantic nav element with ARIA label
 * - Indicates current page with aria-current="page"
 * - Keyboard accessible with visible focus states
 * - Mobile-friendly responsive design
 * - Meets WCAG AA color contrast requirements
 */

const currentPath = Astro.url.pathname;

/**
 * Navigation link item
 */
interface NavLink {
	/** Display text for the link */
	label: string;
	/** URL path for the link */
	href: string;
}

const navLinks: NavLink[] = [
	{ label: "Home", href: "/" },
	{ label: "About", href: "/about" },
];

/**
 * Checks if the given path matches the current page
 * @param href - The path to check
 * @returns True if the path matches the current page
 */
function isCurrentPage(href: string): boolean {
	// Normalize paths for comparison
	const normalizedCurrent =
		currentPath === "/" ? "/" : currentPath.replace(/\/$/, "");
	const normalizedHref = href === "/" ? "/" : href.replace(/\/$/, "");
	return normalizedCurrent === normalizedHref;
}
---

<nav aria-label="Main navigation" class="nav">
	<ul class="nav-list">
		{
			navLinks.map((link) => (
				<li class="nav-item">
					<a
						href={link.href}
						class="nav-link"
						aria-current={isCurrentPage(link.href) ? "page" : undefined}
					>
						{link.label}
					</a>
				</li>
			))
		}
	</ul>
</nav>

<style>
	.nav {
		padding: 1rem;
		border-bottom: 1px solid #e5e7eb;
	}

	.nav-list {
		display: flex;
		flex-wrap: wrap;
		gap: 1.5rem;
		list-style: none;
		margin: 0;
		padding: 0;
		max-width: 1200px;
		margin-left: auto;
		margin-right: auto;
	}

	.nav-item {
		margin: 0;
	}

	.nav-link {
		display: inline-block;
		padding: 0.5rem 1rem;
		color: #374151;
		text-decoration: none;
		font-weight: 500;
		border-radius: 0.375rem;
		transition: all 0.2s ease-in-out;
		min-height: 44px;
		min-width: 44px;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.nav-link:hover {
		background-color: #f3f4f6;
		color: #1f2937;
	}

	.nav-link:focus {
		outline: 2px solid #3b82f6;
		outline-offset: 2px;
	}

	.nav-link[aria-current="page"] {
		color: #1f2937;
		background-color: #e5e7eb;
		font-weight: 600;
	}

	/* Mobile responsive - stack vertically on small screens */
	@media (max-width: 640px) {
		.nav-list {
			flex-direction: column;
			gap: 0.5rem;
		}

		.nav-link {
			width: 100%;
		}
	}
</style>
